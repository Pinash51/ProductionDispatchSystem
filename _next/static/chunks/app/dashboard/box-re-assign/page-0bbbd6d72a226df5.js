(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{4423:(e,t,s)=>{Promise.resolve().then(s.bind(s,9517))},8867:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5160:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},7780:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9517:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var a=s(5155),l=s(8531),i=s(9749),n=s(2115),o=s(9606),r=s(1665),c=s(7709),d=s(3391),m=s(8897),u=s.n(m),x=s(3312),p=s(3900),h=s(8867),v=s(7780),b=s(5160),N=s(648),j=s(1536),f=s(6263),g=s(5239),y=s(6935),C=s(4460);function w(){var e,t,s;let[l,m]=(0,n.useState)([]),[w,E]=(0,n.useState)(""),[S,P]=(0,n.useState)(""),[A,O]=(0,n.useState)(!1),[_,B]=(0,n.useState)([]),[M,I]=(0,n.useState)(Date.now()),[k,D]=(0,n.useState)("1"),{userData:R}=(0,d.d4)(e=>e.user),[T,{data:L,isLoading:z}]=(0,C.Le)(),{data:W,isLoading:q}=(0,C.xk)(null==R?void 0:R.GRP_EMP_NO),[V,{data:G,isLoading:Q}]=(0,C.VC)(),[Y]=(0,C.d_)(),[$,{isSuccess:J,isError:H}]=(0,C.CK)(),{control:Z,setValue:F,handleSubmit:K,formState:{errors:X},watch:U,reset:ee}=(0,o.mN)(),et=(null===(e=U("company"))||void 0===e?void 0:e.value)||"",es=null===(t=U("productionSection"))||void 0===t?void 0:t.value,ea=null===(s=U("machine"))||void 0===s?void 0:s.value,el=U("jobs")||[];(0,n.useEffect)(()=>{R&&T({GroupEmpID:null==R?void 0:R.GRP_EMP_NO})},[R,T]),(0,n.useEffect)(()=>{et&&(V({EmpID:null==R?void 0:R.GRP_EMP_NO}),F("productionSection",{label:"",value:""}),F("machine",{label:"",value:""}),F("toSection",{label:"",value:""}),F("jobs",[]))},[et,V,F]),(0,n.useEffect)(()=>{et&&es&&(F("machine",{label:"",value:""}),F("jobs",[]))},[et,es,F]),(0,n.useEffect)(()=>{ea&&es&&F("jobs",[])},[ea,es,F]),(0,n.useEffect)(()=>{(async()=>{if(0===el.length){m([]);return}try{let e=await Promise.all(el.map(async e=>{let{data:t}=await Y({intJobID:e.value,EmpID:null==R?void 0:R.GRP_EMP_NO});return{...null==t?void 0:t[0],parentName:e.label}}));m(e)}catch(e){console.error("Error fetching job details:",e)}})()},[el,Y]);let ei=async e=>{if(!(await u().fire({title:"Are you sure?",text:"Assign this box.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#008000",cancelButtonColor:"#d33",confirmButtonText:"Yes Save"})).isConfirmed){u().fire({position:"center",icon:"error",title:"Box assignment cancelled.",showConfirmButton:!1,timer:800});return}try{console.log("Request Payload:",e),er(),u().fire({position:"center",icon:"success",title:"Box assigned successfully.",showConfirmButton:!1,timer:800})}catch(e){console.error("Error submitting data:",e),r.oR.error("An error occurred while submitting the data.")}},en=(e,t,s)=>(null==e?void 0:e.map(e=>({label:e[t],value:e[s]})))||[],eo=async(e,t)=>{if("existing"===t?E(e):P(e),B([]),11===e.length){B([]);try{let t=await fetch("".concat((0,y.$)(),"/Production/GetBoxDetailsByBarcode"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Barcode:e,EmpID:null==R?void 0:R.GRP_EMP_NO})}),s=await t.json();s[0]&&B(s)}catch(e){r.oR.error("No data Found"),console.error("Error fetching box details:",e)}}},er=()=>{ee(),I(Date.now()),F("company",{label:"",value:""}),F("productionSection",{label:"",value:""}),F("machine",{label:"",value:""}),F("toSection",{label:"",value:""}),F("jobs",[]),m([]),E(""),P(""),B([])};return(0,n.useEffect)(()=>{L&&L.length>0&&F("company",{label:L[0].Company,value:L[0].CompanyID})},[L,F]),(0,n.useEffect)(()=>{if(G&&W){var e,t,s,a;F("toSection",{label:(null===(e=W[0])||void 0===e?void 0:e.SECTION_NAME)||"",value:(null===(t=W[0])||void 0===t?void 0:t.SECTION_ID)||""}),F("productionSection",{label:(null===(s=G[0])||void 0===s?void 0:s.SECTION_NAME)||"",value:(null===(a=G[0])||void 0===a?void 0:a.SECTION_ID)||""})}},[G,W,F]),(0,a.jsxs)("form",{className:"my-3 px-2 md:px-5",onSubmit:K(ei),children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[[{label:"Company ".concat(z?", Loading...":""),name:"company",options:en(L,"Company","CompanyID")},{label:"Section ".concat(q?", Loading...":""),name:"toSection",options:en(W,"SECTION_NAME","SECTION_ID"),isDisabled:!et}].map(e=>{var t;let{label:s,name:l,options:i,isDisabled:n}=e;return(0,a.jsxs)("div",{className:"min-w-[300px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,a.jsx)(o.xI,{name:l,control:Z,rules:{required:"".concat(s," is required")},render:e=>{let{field:t}=e;return(0,a.jsx)(c.Ay,{...t,options:i,isDisabled:n,className:"basic-multi-select",classNamePrefix:"select"})}}),X[l]&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null===(t=X[l])||void 0===t?void 0:t.message})]},l)}),(0,a.jsxs)("div",{className:"min-w-[300px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan Existing QR/Barcode"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.A,{open:A,onOpenChange:O,onScan:e=>eo(e,"existing")}),(0,a.jsx)(p.p,{type:"text",id:"existingBarcode",placeholder:"Existing Barcode",value:w,onChange:e=>eo(e.target.value,"existing"),className:"flex-grow"}),""!==w&&(_.length>0?(0,a.jsxs)("p",{className:"text-green-500 font-bold flex items-center",children:["Valid ",(0,a.jsx)(h.A,{className:"ml-1"})]}):(0,a.jsxs)("p",{className:"text-red-500 font-bold text-sm flex items-center",children:["Not Valid! ",(0,a.jsx)(N.Tfw,{className:"ml-1"})]}))]})]}),(0,a.jsxs)("div",{className:"min-w-[300px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan New QR/Barcode"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ".concat(_.length&&""!==w?"":"opacity-50 pointer-events-none"),children:[(0,a.jsx)(f.A,{open:A,onOpenChange:O,onScan:e=>eo(e,"new")}),(0,a.jsx)(p.p,{required:!0,type:"text",id:"newBarcode",placeholder:"New Barcode",value:S,onChange:e=>eo(e.target.value,"new"),className:"flex-grow"}),""!==S&&(_.length>0?(0,a.jsxs)("p",{className:"text-green-500 font-bold flex items-center",children:["Valid ",(0,a.jsx)(h.A,{className:"ml-1"})]}):(0,a.jsxs)("p",{className:"text-red-500 font-bold text-sm flex items-center",children:["Not Valid! ",(0,a.jsx)(N.Tfw,{className:"ml-1"})]}))]})]}),(0,a.jsxs)("div",{className:"min-w-[300px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Box Weight"}),(0,a.jsx)(o.xI,{name:"boxWeight",control:Z,rules:{required:"Box Weight is required"},render:e=>{let{field:t}=e;return(0,a.jsx)(p.p,{type:"number",id:"boxWeight",placeholder:"Box Weight",...t})}}),X.boxWeight&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:X.boxWeight.message})]}),(0,a.jsxs)("div",{className:"min-w-[300px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number Of Partitions"}),(0,a.jsx)(o.xI,{name:"numberOfPartitions",control:Z,rules:{required:"Number of Partitions is required"},render:e=>{let{field:t}=e;return(0,a.jsx)(p.p,{required:!0,type:"number",id:"numberOfPartitions",placeholder:"Number of Partitions",...t})}}),X.numberOfPartitions&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:X.numberOfPartitions.message})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6",children:[(0,a.jsxs)(x.$,{disabled:0===_.length,variant:"default",type:"submit",children:["Save ",(0,a.jsx)(v.A,{className:"ml-2"})]}),(0,a.jsxs)(x.$,{variant:"destructive",onClick:er,children:["Clear ",(0,a.jsx)(N.Tfw,{className:"ml-2"})]})]}),(0,a.jsx)("div",{className:"space-y-4 mt-8",children:l.map((e,t)=>(0,a.jsx)(i.Zp,{className:"border-2 border-primary",children:(0,a.jsxs)(i.Wu,{className:"p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.rrY,{className:"text-primary"}),null==e?void 0:e.parentName]}),(null==e?void 0:e.decAllocQty)?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(g.L,{icon:(0,a.jsx)(N.A2r,{className:"text-blue-500",size:30}),label:"Allocated Qty",value:null==e?void 0:e.decAllocQty}),(0,a.jsx)(g.L,{icon:(0,a.jsx)(j.$BV,{className:"text-blue-500",size:30}),label:"MC Counter Rate",value:null==e?void 0:e.decMCCounterRate}),(0,a.jsx)(g.L,{icon:(0,a.jsx)(j.YYR,{className:"text-green-500",size:30}),label:"MC Output",value:null==e?void 0:e.decOutPut}),(0,a.jsx)(g.L,{icon:(0,a.jsx)(j.w_X,{className:"text-yellow-500",size:30}),label:"WPM",value:null==e?void 0:e.decWPM}),(0,a.jsx)(g.L,{icon:(0,a.jsx)(j.Ani,{className:"text-purple-500",size:30}),label:"MC Counter Count",value:null==e?void 0:e.intMCCounterCount}),(0,a.jsx)(g.L,{icon:(0,a.jsx)(j.aQJ,{className:"text-red-500",size:30}),label:"No of taps",value:null==e?void 0:e.intNoofTapes})]}):(0,a.jsx)("p",{className:"text-red-500 font-bold",children:"There are no job details available. Please disregard this job!"}),(null==e?void 0:e.IDescription)&&(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-2 border border-orange-500 rounded-xl p-2",children:[(0,a.jsx)(b.A,{color:"orange",size:30}),(0,a.jsx)("span",{className:"text-sm",children:e.IDescription})]})]})},t))})]},M)}function E(){return(0,a.jsxs)("div",{className:"container md:p-6",children:[(0,a.jsx)(i.Zp,{className:"flex items-center justify-between p-3",children:(0,a.jsx)(l.h,{variant:"primary",size:"sm",children:"Production Box Re-Assign"})}),(0,a.jsx)(w,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5479,6711,8320,7525,3391,4716,9295,1342,552,9606,7709,5746,8441,1517,7358],()=>t(4423)),_N_E=e.O()}]);