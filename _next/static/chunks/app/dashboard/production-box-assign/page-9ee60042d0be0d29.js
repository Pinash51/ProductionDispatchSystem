(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1537],{437:(e,l,a)=>{Promise.resolve().then(a.bind(a,5034))},8867:(e,l,a)=>{"use strict";a.d(l,{A:()=>i});let i=(0,a(7401).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5034:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>D});var i=a(5155),n=a(8531),s=a(9749),t=a(2115),o=a(7709),r=a(9606),c=a(1665),d=a(4460),u=a(3312),m=a(8867),x=a(7780),v=a(5160),p=a(648),h=a(1536),f=a(3900),j=a(6263),N=a(5239),b=a(6935),g=a(3391),y=a(8897),C=a.n(y),S=a(4179),E=a(8986);let D=(0,t.memo)(function(){var e,l,a,y;let[D,I]=(0,t.useState)([]),[_,M]=(0,t.useState)(""),[w,P]=(0,t.useState)(!1),[O,R]=(0,t.useState)([]),[A,L]=(0,t.useState)(Date.now()),{userData:B}=(0,g.d4)(e=>e.user),[T,k]=(0,t.useState)(!1),[z,{data:G,isLoading:J}]=(0,d.Le)(),{data:q,isLoading:Q}=(0,d.xk)(null==B?void 0:B.GRP_EMP_NO),[V,{data:$,isLoading:F}]=(0,d.VC)(),[Y,{data:W,isLoading:Z}]=(0,d._B)(),[K,{data:X,isLoading:H}]=(0,d.Ly)(),[U]=(0,d.d_)(),[ee,{isSuccess:el,isError:ea}]=(0,d.CK)(),{control:ei,setValue:en,handleSubmit:es,formState:{errors:et},watch:eo,reset:er}=(0,r.mN)(),ec=(null===(e=eo("company"))||void 0===e?void 0:e.value)||"",ed=null===(l=eo("productionSection"))||void 0===l?void 0:l.value,eu=null===(a=eo("machine"))||void 0===a?void 0:a.value;null===(y=eo("toSection"))||void 0===y||y.value;let em=eo("jobs")||[],[ex,ev]=(0,t.useState)("1");(0,t.useEffect)(()=>{B&&z({GroupEmpID:null==B?void 0:B.GRP_EMP_NO})},[B]),(0,t.useEffect)(()=>{if(ec){var e;V({EmpID:null==B?void 0:B.GRP_EMP_NO}),eo("productionSection")&&en("productionSection",null),eo("machine")&&en("machine",null),eo("toSection")&&en("toSection",null),(null===(e=eo("jobs"))||void 0===e?void 0:e.length)>0&&en("jobs",[])}},[ec,V,en]),(0,t.useEffect)(()=>{if(ec&&ed){var e;Y({SECTION_ID:ed,CompanyID:ec,EmpID:null==B?void 0:B.GRP_EMP_NO}),eo("machine")&&en("machine",null),(null===(e=eo("jobs"))||void 0===e?void 0:e.length)>0&&en("jobs",[])}},[ec,ed,Y,en]),(0,t.useEffect)(()=>{if(eu&&ed){var e;K({intMCID:eu,SectionID:ed,EmpID:null==B?void 0:B.GRP_EMP_NO}),(null===(e=eo("jobs"))||void 0===e?void 0:e.length)>0&&en("jobs",[])}},[eu,ed,K,en]),(0,t.useEffect)(()=>{(async()=>{if(0===em.length){I([]);return}try{let e=await Promise.all(em.map(async e=>{let{data:l}=await U({intJobID:e.value,intMCID:eu,EmpID:null==B?void 0:B.GRP_EMP_NO});return{...null==l?void 0:l[0],parentName:e.label}}));I(e)}catch(e){console.error("Error fetching job details:",e)}})()},[JSON.stringify(em),eu,U]);let ep=async e=>{if(k(!1),0===O.length){c.oR.error("QR code not valid!");return}if(!(await C().fire({title:"Are you sure?",text:"Assign this box.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#008000",cancelButtonColor:"#d33",confirmButtonText:"Yes Save"})).isConfirmed){C().fire({position:"center",icon:"error",title:"Box assignment cancelled.",showConfirmButton:!1,timer:800}),k(!0);return}let l=D.filter(e=>null==e?void 0:e.intMCPlanID).map(l=>{var a;return{intMCID:e.machine.value,intMCPlanID:l.intMCPlanID,intBoxID:null==O?void 0:null===(a=O[0])||void 0===a?void 0:a.intBoxID,sectionID:e.productionSection.value,companyID:e.company.value,toSection:e.toSection.value,EmpID:null==B?void 0:B.GRP_EMP_NO,IsDay:ex}});if(0===l.length){c.oR.error("No valid job details found!");return}try{console.log("Request Payload:",l),await ee(l),ej(),C().fire({position:"center",icon:"success",title:"Box assigned successfully.",showConfirmButton:!1,timer:800}),k(!0)}catch(e){console.error("Error submitting data:",e),c.oR.error("An error occurred while submitting the data."),k(!0)}},eh=(e,l,a)=>(null==e?void 0:e.map(e=>({label:e[l],value:e[a]})))||[];(0,t.useEffect)(()=>{el&&(c.oR.success("Successfully added."),er()),ea&&c.oR.error("Added fail!")},[el,ea]);let ef=async e=>{M(e),R([]),11==e.length&&(R([]),await fetch("".concat((0,b.$)(),"/Production/GetBoxDetailsByBarcode"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Barcode:e,EmpID:null==B?void 0:B.GRP_EMP_NO})}).then(e=>e.json()).then(e=>{e[0]&&R(e)}).catch(e=>{c.oR.error("No data Found"),console.error("Error fetching box details:",e)}))};(0,t.useEffect)(()=>{D.length>0&&O.length>0?k(!0):k(!1)},[D,O]);let ej=()=>{er(),L(Date.now()),en("Company",null),en("productionSection",null),en("machine",null),en("toSection",null),en("jobs",null),I([]),M(""),R([])};return(0,t.useEffect)(()=>{G&&G.length>0&&en("company",{label:G[0].Company,value:G[0].CompanyID})},[G,en]),(0,t.useEffect)(()=>{if($&&q){var e,l,a,i;en("toSection",{label:(null===(e=q[0])||void 0===e?void 0:e.SECTION_NAME)||"",value:(null===(l=q[0])||void 0===l?void 0:l.SECTION_ID)||""}),en("productionSection",{label:(null===(a=$[0])||void 0===a?void 0:a.SECTION_NAME)||"",value:(null===(i=$[0])||void 0===i?void 0:i.SECTION_ID)||""})}},[$,q,en]),(0,i.jsxs)("div",{className:"container md:p-6",children:[(0,i.jsxs)(s.Zp,{className:"flex items-center justify-between p-3",children:[(0,i.jsx)(n.h,{variant:"primary",size:"sm",children:"Production Box Assign"}),(0,i.jsxs)(S.z,{defaultValue:ex,onClick:e=>{ev(e.target.value)},className:"flex",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(S.C,{value:"1",id:"Day"}),(0,i.jsx)(E.J,{htmlFor:"Day",children:"Day"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(S.C,{value:"0",id:"Night"}),(0,i.jsx)(E.J,{htmlFor:"Night",children:"Night"})]})]})]}),(0,i.jsxs)("form",{className:"my-3 px-2 md:px-5",onSubmit:es(ep),children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[[{label:"Company ".concat(J?", Loading...":""),name:"company",options:eh(G,"Company","CompanyID")},{label:"To Section ".concat(Q?", Loading...":""),name:"toSection",options:eh(q,"SECTION_NAME","SECTION_ID"),isDisabled:!ec},{label:"Production Section ".concat(F?", Loading...":""),name:"productionSection",options:eh($,"SECTION_NAME","SECTION_ID"),isDisabled:!ec},{label:"Machine ".concat(Z?", Loading...":""),name:"machine",options:eh(W,"vcMCCODE","intMCID"),isDisabled:!ed},{label:"Select Jobs ".concat(H?", Loading...":""),name:"jobs",options:eh(X,"vcJobNo","intJobID"),isMulti:!0,isDisabled:!eu&&H}].map(e=>{var l,a;let{label:n,name:s,options:t,isDisabled:c,isMulti:d}=e;return(0,i.jsxs)("div",{className:"min-w-[300px]",children:[(0,i.jsx)("label",{children:n}),(0,i.jsx)(r.xI,{name:s,control:ei,rules:{required:"".concat(n," is required")},render:e=>{let{field:l}=e;return(0,i.jsx)(o.Ay,{...l,options:t,isDisabled:c,isMulti:d,instanceId:s,isClearable:!0,className:"text-black"})}}),et[s]&&(0,i.jsx)("p",{className:"text-red-500",children:null===(a=et[s])||void 0===a?void 0:null===(l=a.message)||void 0===l?void 0:l.toString()})]},s)}),(0,i.jsxs)("div",{className:"min-w-[300px]",children:[(0,i.jsx)("label",{children:"Scan QR/Bar code"}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(j.A,{open:w,onOpenChange:P,onScan:ef}),(0,i.jsx)(f.p,{type:"text",id:"code",placeholder:"code",value:_,onChange:e=>ef(e.target.value)}),(0,i.jsxs)("div",{children:[""!==_&&O.length>0&&(0,i.jsxs)("p",{className:"text-green-500 font-bold flex items-center gap-1 mx-1",children:["Valid ",(0,i.jsx)(m.A,{})]}),""!==_&&0==O.length&&(0,i.jsxs)("p",{className:"text-red-500 font-bold text-sm text-nowrap flex items-center gap-1 mx-1",children:["Not Valid! ",(0,i.jsx)(p.Tfw,{})]})]})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,i.jsxs)(u.$,{disabled:!T,variant:"default",type:"submit",className:"my-4",children:["Save ",(0,i.jsx)(x.A,{})]}),(0,i.jsxs)(u.$,{variant:"destructive",onClick:()=>ej(),children:["Clear ",(0,i.jsx)(p.Tfw,{})]})]})]},A),(0,i.jsx)("div",{className:"space-y-4 mb-10 px-2 md:px-5",children:D&&(null==D?void 0:D.map((e,l)=>(0,i.jsxs)("div",{className:"border-2 border-primary rounded-xl p-3",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold hover:no-underline",children:(0,i.jsxs)("span",{className:"flex items-center gap-2",children:[(0,i.jsx)(h.rrY,{className:"text-primary"}),null==e?void 0:e.parentName]})}),(null==e?void 0:e.decAllocQty)?(0,i.jsx)("div",{children:(0,i.jsx)(s.Zp,{children:(0,i.jsxs)(s.Wu,{className:"pt-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[(0,i.jsx)(N.L,{icon:(0,i.jsx)(p.A2r,{className:"text-blue-500",size:30}),label:"Allocated Qty",value:null==e?void 0:e.decAllocQty}),(0,i.jsx)(N.L,{icon:(0,i.jsx)(h.$BV,{className:"text-blue-500",size:30}),label:"MC Counter Rate",value:null==e?void 0:e.decMCCounterRate}),(0,i.jsx)(N.L,{icon:(0,i.jsx)(h.YYR,{className:"text-green-500",size:30}),label:"MC Output",value:null==e?void 0:e.decOutPut}),(0,i.jsx)(N.L,{icon:(0,i.jsx)(h.w_X,{className:"text-yellow-500",size:30}),label:"WPM",value:null==e?void 0:e.decWPM}),(0,i.jsx)(N.L,{icon:(0,i.jsx)(h.Ani,{className:"text-purple-500",size:30}),label:"MC Counter Count",value:null==e?void 0:e.intMCCounterCount}),(0,i.jsx)(N.L,{icon:(0,i.jsx)(h.aQJ,{className:"text-red-500",size:30}),label:"No of taps",value:null==e?void 0:e.intNoofTapes})]}),(0,i.jsxs)("div",{className:"my-2 flex items-center gap-2 border border-orange-500 rounded-xl p-2",children:[(0,i.jsx)(u.$,{variant:"ghost",children:(0,i.jsx)(v.A,{color:"orange",size:30})}),(0,i.jsxs)("span",{className:"text-sm",children:[" ",null==e?void 0:e.IDescription]})]})]})})}):(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"text-red-500 font-extrabold p-5",children:"There are no job details available. Please disregard this job!"})})]},l)))})]})})},8986:(e,l,a)=>{"use strict";a.d(l,{J:()=>c});var i=a(5155),n=a(2115),s=a(6195),t=a(1027),o=a(1567);let r=(0,t.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,l)=>{let{className:a,...n}=e;return(0,i.jsx)(s.b,{ref:l,className:(0,o.cn)(r(),a),...n})});c.displayName=s.b.displayName},4179:(e,l,a)=>{"use strict";a.d(l,{C:()=>c,z:()=>r});var i=a(5155),n=a(2115),s=a(1470),t=a(3565),o=a(1567);let r=n.forwardRef((e,l)=>{let{className:a,...n}=e;return(0,i.jsx)(s.bL,{className:(0,o.cn)("grid gap-2",a),...n,ref:l})});r.displayName=s.bL.displayName;let c=n.forwardRef((e,l)=>{let{className:a,...n}=e;return(0,i.jsx)(s.q7,{ref:l,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...n,children:(0,i.jsx)(s.C1,{className:"flex items-center justify-center",children:(0,i.jsx)(t.A,{className:"h-3.5 w-3.5 fill-primary"})})})});c.displayName=s.q7.displayName}},e=>{var l=l=>e(e.s=l);e.O(0,[5479,6711,8320,7525,3391,4716,9295,1342,552,9606,7709,5232,5746,8441,1517,7358],()=>l(437)),_N_E=e.O()}]);